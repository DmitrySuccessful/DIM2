<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MyShop - –£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–º">
    <meta name="theme-color" content="#4CAF50">
    <title>MyShop - –°–∏–º—É–ª—è—Ç–æ—Ä –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–ú–∞–≥–∞–∑–∏–Ω–∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <div class="container header-content">
            <h1 class="game-title">MyShop</h1>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-icon">üí∞</span>
                    <span id="money" class="stat-value">1000</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">‚≠ê</span>
                    <span id="level" class="stat-value">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">‚ù§Ô∏è</span>
                    <span id="reputation" class="stat-value">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="nav">
        <div class="container">
            <ul class="nav-list">
                <li><button class="nav-btn active" data-section="shop-section">–ú–∞–≥–∞–∑–∏–Ω</button></li>
                <li><button class="nav-btn" data-section="marketing-section">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</button></li>
                <li><button class="nav-btn" data-section="staff-section">–ü–µ—Ä—Å–æ–Ω–∞–ª</button></li>
                <li><button class="nav-btn" data-section="minigame-section">–ú–∏–Ω–∏-–∏–≥—Ä–∞</button></li>
                <li><button class="nav-btn" data-section="settings-section">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button></li>
            </ul>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main">
        <div class="container">
            <!-- –ú–∞–≥–∞–∑–∏–Ω -->
            <section id="shop-section" class="section active">
                <h2>–ú–æ–π –ú–∞–≥–∞–∑–∏–Ω</h2>
                <div id="shop-grid" class="shop-grid">
                    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>

            <!-- –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ -->
            <section id="marketing-section" class="section">
                <h2>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</h2>
                <div class="marketing-options">
                    <!-- –ö–∞–º–ø–∞–Ω–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>

            <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª -->
            <section id="staff-section" class="section">
                <h2>–ü–µ—Ä—Å–æ–Ω–∞–ª</h2>
                <div id="staff-list" class="staff-list">
                    <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>

            <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞ -->
            <section id="minigame-section" class="section">
                <h2>–õ–æ–≤–µ—Ü –¢–æ–≤–∞—Ä–æ–≤</h2>
                <div class="minigame-container">
                    <div class="minigame-instructions">
                        <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ –∏–ª–∏ –∫–∞—Å–∞–π—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω–æ–π.</p>
                        <p>–õ–æ–≤–∏—Ç–µ –ø–∞–¥–∞—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–Ω—å–≥–∏!</p>
                        <ul>
                            <li>ü•â –ë—Ä–æ–Ω–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã: +10 –º–æ–Ω–µ—Ç</li>
                            <li>ü•à –°–µ—Ä–µ–±—Ä—è–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã: +25 –º–æ–Ω–µ—Ç</li>
                            <li>ü•á –ó–æ–ª–æ—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã: +50 –º–æ–Ω–µ—Ç</li>
                        </ul>
                    </div>
                    <canvas id="minigame-canvas"></canvas>
                    <div class="minigame-controls">
                        <div class="score">–°—á—ë—Ç: <span id="game-score">0</span></div>
                        <button id="start-game" class="primary-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                        <div class="time">–í—Ä–µ–º—è: <span id="game-time">60</span>—Å</div>
                    </div>
                </div>
            </section>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <section id="settings-section" class="section">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <div class="settings-container">
                    <button id="clear-save" class="danger-btn">–û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</button>
                    <button id="help-btn" class="secondary-btn">–ü–æ–º–æ—â—å</button>
                </div>
            </section>
        </div>
    </main>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-copyright">
                ¬© 2024 MyShop
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link" id="help-link">–ü–æ–º–æ—â—å</a>
                <a href="#" class="footer-link" id="about-link">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
            </div>
        </div>
    </footer>

    <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ -->
    <div id="loading" class="loader">
        <!-- –°–ø–∏–Ω–Ω–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CSS -->
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div id="error-message" class="error-message" style="display: none;">
        <p>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script type="module">
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error:', {
                message: msg,
                url: url,
                line: lineNo,
                column: columnNo,
                error: error
            });
            
            const errorMessage = document.getElementById('error-message');
            errorMessage.style.display = 'block';
            errorMessage.querySelector('p').textContent = 
                '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫
            document.getElementById('loading').style.display = 'none';
            
            return false;
        };

        // –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π
        try {
            const { CONFIG } = await import('./scripts/config.js');
            const { GameState, Product, StaffMember } = await import('./scripts/models.js');
            const { 
                ProductService, 
                StaffService, 
                MarketingService, 
                SaveService, 
                ReferralService 
            } = await import('./scripts/services.js');
            const { UI } = await import('./scripts/ui.js');
            const { Minigame } = await import('./scripts/minigame.js');
            const { Game } = await import('./scripts/game.js');

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            const game = new Game();
            window.game = game; // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏

            // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫
            document.getElementById('loading').style.display = 'none';
        } catch (error) {
            console.error('Failed to initialize game:', error);
            const errorMessage = document.getElementById('error-message');
            errorMessage.style.display = 'block';
            errorMessage.querySelector('p').textContent = 
                '–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.';
            document.getElementById('loading').style.display = 'none';
        }
    </script>
</body>
</html> 